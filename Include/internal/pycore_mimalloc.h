#ifndef Py_INTERNAL_MIMALLOC_H
#define Py_INTERNAL_MIMALLOC_H

#ifndef Py_BUILD_CORE
#  error "this header requires Py_BUILD_CORE define"
#endif

#if defined(MIMALLOC_H) || defined(MIMALLOC_TYPES_H)
#  error "pycore_mimalloc.h must be included before mimalloc.h"
#endif

#include "pycore_pymem.h"
#define MI_DEBUG_UNINIT     PYMEM_CLEANBYTE
#define MI_DEBUG_FREED      PYMEM_DEADBYTE
#define MI_DEBUG_PADDING    PYMEM_FORBIDDENBYTE


/* Prefix all non-static symbols with "_Py_"
 * nm Objects/obmalloc.o | grep -E "[CRT] _?mi" | awk '{print "#define " $3 " PyUnstable" $3}' | sort
 */

#define _mi_abandoned_await_readers PyUnstable__mi_abandoned_await_readers
#define _mi_abandoned_collect PyUnstable__mi_abandoned_collect
#define _mi_abandoned_reclaim_all PyUnstable__mi_abandoned_reclaim_all
#define mi_aligned_alloc PyUnstable_mi_aligned_alloc
#define mi_aligned_offset_recalloc PyUnstable_mi_aligned_offset_recalloc
#define mi_aligned_recalloc PyUnstable_mi_aligned_recalloc
#define _mi_arena_alloc_aligned PyUnstable__mi_arena_alloc_aligned
#define _mi_arena_alloc PyUnstable__mi_arena_alloc
#define mi_arena_area PyUnstable_mi_arena_area
#define _mi_arena_collect PyUnstable__mi_arena_collect
#define _mi_arena_contains PyUnstable__mi_arena_contains
#define _mi_arena_free PyUnstable__mi_arena_free
#define _mi_arena_id_none PyUnstable__mi_arena_id_none
#define _mi_arena_memid_is_os_allocated PyUnstable__mi_arena_memid_is_os_allocated
#define _mi_arena_memid_is_suitable PyUnstable__mi_arena_memid_is_suitable
#define _mi_arena_unsafe_destroy_all PyUnstable__mi_arena_unsafe_destroy_all
#define _mi_assert_fail PyUnstable__mi_assert_fail
#define _mi_bin PyUnstable__mi_bin
#define _mi_bin_size PyUnstable__mi_bin_size
#define _mi_bitmap_claim_across PyUnstable__mi_bitmap_claim_across
#define _mi_bitmap_claim PyUnstable__mi_bitmap_claim
#define _mi_bitmap_is_any_claimed_across PyUnstable__mi_bitmap_is_any_claimed_across
#define _mi_bitmap_is_any_claimed PyUnstable__mi_bitmap_is_any_claimed
#define _mi_bitmap_is_claimed_across PyUnstable__mi_bitmap_is_claimed_across
#define _mi_bitmap_is_claimed PyUnstable__mi_bitmap_is_claimed
#define _mi_bitmap_try_claim PyUnstable__mi_bitmap_try_claim
#define _mi_bitmap_try_find_claim_field PyUnstable__mi_bitmap_try_find_claim_field
#define _mi_bitmap_try_find_from_claim_across PyUnstable__mi_bitmap_try_find_from_claim_across
#define _mi_bitmap_try_find_from_claim_pred PyUnstable__mi_bitmap_try_find_from_claim_pred
#define _mi_bitmap_try_find_from_claim PyUnstable__mi_bitmap_try_find_from_claim
#define _mi_bitmap_unclaim_across PyUnstable__mi_bitmap_unclaim_across
#define _mi_bitmap_unclaim PyUnstable__mi_bitmap_unclaim
#define mi_calloc_aligned_at PyUnstable_mi_calloc_aligned_at
#define mi_calloc_aligned PyUnstable_mi_calloc_aligned
#define mi_calloc PyUnstable_mi_calloc
#define mi_cfree PyUnstable_mi_cfree
#define mi_check_owned PyUnstable_mi_check_owned
#define _mi_clock_end PyUnstable__mi_clock_end
#define _mi_clock_now PyUnstable__mi_clock_now
#define _mi_clock_start PyUnstable__mi_clock_start
#define mi_collect PyUnstable_mi_collect
#define _mi_commit_mask_committed_size PyUnstable__mi_commit_mask_committed_size
#define _mi_commit_mask_next_run PyUnstable__mi_commit_mask_next_run
#define _mi_current_thread_count PyUnstable__mi_current_thread_count
#define mi_debug_show_arenas PyUnstable_mi_debug_show_arenas
#define _mi_deferred_free PyUnstable__mi_deferred_free
#define mi_dupenv_s PyUnstable_mi_dupenv_s
#define _mi_error_message PyUnstable__mi_error_message
#define mi__expand PyUnstable_mi__expand
#define mi_expand PyUnstable_mi_expand
#define _mi_fprintf PyUnstable__mi_fprintf
#define _mi_fputs PyUnstable__mi_fputs
#define mi_free_aligned PyUnstable_mi_free_aligned
#define _mi_free_delayed_block PyUnstable__mi_free_delayed_block
#define _mi_free_generic PyUnstable__mi_free_generic
#define mi_free PyUnstable_mi_free
#define mi_free_size_aligned PyUnstable_mi_free_size_aligned
#define mi_free_size PyUnstable_mi_free_size
#define mi_good_size PyUnstable_mi_good_size
#define mi_heap_alloc_new_n PyUnstable_mi_heap_alloc_new_n
#define mi_heap_alloc_new PyUnstable_mi_heap_alloc_new
#define mi_heap_calloc_aligned_at PyUnstable_mi_heap_calloc_aligned_at
#define mi_heap_calloc_aligned PyUnstable_mi_heap_calloc_aligned
#define mi_heap_calloc PyUnstable_mi_heap_calloc
#define mi_heap_check_owned PyUnstable_mi_heap_check_owned
#define _mi_heap_collect_abandon PyUnstable__mi_heap_collect_abandon
#define mi_heap_collect PyUnstable_mi_heap_collect
#define _mi_heap_collect_retired PyUnstable__mi_heap_collect_retired
#define mi_heap_contains_block PyUnstable_mi_heap_contains_block
#define _mi_heap_delayed_free_all PyUnstable__mi_heap_delayed_free_all
#define _mi_heap_delayed_free_partial PyUnstable__mi_heap_delayed_free_partial
#define mi_heap_delete PyUnstable_mi_heap_delete
#define _mi_heap_destroy_pages PyUnstable__mi_heap_destroy_pages
#define mi_heap_destroy PyUnstable_mi_heap_destroy
#define _mi_heap_empty PyUnstable__mi_heap_empty
#define mi_heap_get_backing PyUnstable_mi_heap_get_backing
#define mi_heap_get_default PyUnstable_mi_heap_get_default
#define _mi_heap_main_get PyUnstable__mi_heap_main_get
#define mi_heap_malloc_aligned_at PyUnstable_mi_heap_malloc_aligned_at
#define mi_heap_malloc_aligned PyUnstable_mi_heap_malloc_aligned
#define mi_heap_mallocn PyUnstable_mi_heap_mallocn
#define mi_heap_malloc PyUnstable_mi_heap_malloc
#define mi_heap_malloc_small PyUnstable_mi_heap_malloc_small
#define _mi_heap_malloc_zero_ex PyUnstable__mi_heap_malloc_zero_ex
#define _mi_heap_malloc_zero PyUnstable__mi_heap_malloc_zero
#define _mi_heap_memid_is_suitable PyUnstable__mi_heap_memid_is_suitable
#define mi_heap_new_in_arena PyUnstable_mi_heap_new_in_arena
#define mi_heap_new PyUnstable_mi_heap_new
#define _mi_heap_random_next PyUnstable__mi_heap_random_next
#define mi_heap_realloc_aligned_at PyUnstable_mi_heap_realloc_aligned_at
#define mi_heap_realloc_aligned PyUnstable_mi_heap_realloc_aligned
#define mi_heap_reallocf PyUnstable_mi_heap_reallocf
#define mi_heap_reallocn PyUnstable_mi_heap_reallocn
#define mi_heap_realloc PyUnstable_mi_heap_realloc
#define _mi_heap_realloc_zero PyUnstable__mi_heap_realloc_zero
#define mi_heap_realpath PyUnstable_mi_heap_realpath
#define mi_heap_recalloc_aligned_at PyUnstable_mi_heap_recalloc_aligned_at
#define mi_heap_recalloc_aligned PyUnstable_mi_heap_recalloc_aligned
#define mi_heap_recalloc PyUnstable_mi_heap_recalloc
#define mi_heap_rezalloc_aligned_at PyUnstable_mi_heap_rezalloc_aligned_at
#define mi_heap_rezalloc_aligned PyUnstable_mi_heap_rezalloc_aligned
#define mi_heap_rezalloc PyUnstable_mi_heap_rezalloc
#define _mi_heap_set_default_direct PyUnstable__mi_heap_set_default_direct
#define mi_heap_set_default PyUnstable_mi_heap_set_default
#define mi_heap_strdup PyUnstable_mi_heap_strdup
#define mi_heap_strndup PyUnstable_mi_heap_strndup
#define mi_heap_try_new PyUnstable_mi_heap_try_new
#define _mi_heap_unsafe_destroy_all PyUnstable__mi_heap_unsafe_destroy_all
#define mi_heap_visit_blocks PyUnstable_mi_heap_visit_blocks
#define mi_heap_zalloc_aligned_at PyUnstable_mi_heap_zalloc_aligned_at
#define mi_heap_zalloc_aligned PyUnstable_mi_heap_zalloc_aligned
#define mi_heap_zalloc PyUnstable_mi_heap_zalloc
#define mi_is_in_heap_region PyUnstable_mi_is_in_heap_region
#define _mi_is_main_thread PyUnstable__mi_is_main_thread
#define mi_is_redirected PyUnstable_mi_is_redirected
#define mi_malloc_aligned_at PyUnstable_mi_malloc_aligned_at
#define mi_malloc_aligned PyUnstable_mi_malloc_aligned
#define _mi_malloc_generic PyUnstable__mi_malloc_generic
#define mi_malloc_good_size PyUnstable_mi_malloc_good_size
#define mi_mallocn PyUnstable_mi_mallocn
#define mi_malloc PyUnstable_mi_malloc
#define mi_malloc_size PyUnstable_mi_malloc_size
#define mi_malloc_small PyUnstable_mi_malloc_small
#define mi_malloc_usable_size PyUnstable_mi_malloc_usable_size
#define mi_manage_os_memory_ex PyUnstable_mi_manage_os_memory_ex
#define mi_manage_os_memory PyUnstable_mi_manage_os_memory
#define mi_mbsdup PyUnstable_mi_mbsdup
#define mi_memalign PyUnstable_mi_memalign
#define mi_new_aligned_nothrow PyUnstable_mi_new_aligned_nothrow
#define mi_new_aligned PyUnstable_mi_new_aligned
#define mi_new_nothrow PyUnstable_mi_new_nothrow
#define mi_new_n PyUnstable_mi_new_n
#define mi_new PyUnstable_mi_new
#define mi_new_reallocn PyUnstable_mi_new_reallocn
#define mi_new_realloc PyUnstable_mi_new_realloc
#define mi_option_disable PyUnstable_mi_option_disable
#define mi_option_enable PyUnstable_mi_option_enable
#define mi_option_get_clamp PyUnstable_mi_option_get_clamp
#define mi_option_get PyUnstable_mi_option_get
#define mi_option_get_size PyUnstable_mi_option_get_size
#define mi_option_is_enabled PyUnstable_mi_option_is_enabled
#define mi_option_set_default PyUnstable_mi_option_set_default
#define mi_option_set_enabled_default PyUnstable_mi_option_set_enabled_default
#define mi_option_set_enabled PyUnstable_mi_option_set_enabled
#define mi_option_set PyUnstable_mi_option_set
#define _mi_options_init PyUnstable__mi_options_init
#define _mi_os_alloc_aligned_at_offset PyUnstable__mi_os_alloc_aligned_at_offset
#define _mi_os_alloc_aligned PyUnstable__mi_os_alloc_aligned
#define _mi_os_alloc_huge_os_pages PyUnstable__mi_os_alloc_huge_os_pages
#define _mi_os_alloc PyUnstable__mi_os_alloc
#define _mi_os_commit PyUnstable__mi_os_commit
#define _mi_os_decommit PyUnstable__mi_os_decommit
#define _mi_os_free_ex PyUnstable__mi_os_free_ex
#define _mi_os_free PyUnstable__mi_os_free
#define _mi_os_get_aligned_hint PyUnstable__mi_os_get_aligned_hint
#define _mi_os_good_alloc_size PyUnstable__mi_os_good_alloc_size
#define _mi_os_has_overcommit PyUnstable__mi_os_has_overcommit
#define _mi_os_has_virtual_reserve PyUnstable__mi_os_has_virtual_reserve
#define _mi_os_init PyUnstable__mi_os_init
#define _mi_os_large_page_size PyUnstable__mi_os_large_page_size
#define _mi_os_numa_node_count_get PyUnstable__mi_os_numa_node_count_get
#define _mi_os_numa_node_get PyUnstable__mi_os_numa_node_get
#define _mi_os_page_size PyUnstable__mi_os_page_size
#define _mi_os_protect PyUnstable__mi_os_protect
#define _mi_os_purge_ex PyUnstable__mi_os_purge_ex
#define _mi_os_purge PyUnstable__mi_os_purge
#define _mi_os_random_weak PyUnstable__mi_os_random_weak
#define _mi_os_reset PyUnstable__mi_os_reset
#define _mi_os_unprotect PyUnstable__mi_os_unprotect
#define _mi_os_use_large_page PyUnstable__mi_os_use_large_page
#define _mi_padding_shrink PyUnstable__mi_padding_shrink
#define _mi_page_abandon PyUnstable__mi_page_abandon
#define _mi_page_empty PyUnstable__mi_page_empty
#define _mi_page_free_collect PyUnstable__mi_page_free_collect
#define _mi_page_free PyUnstable__mi_page_free
#define _mi_page_malloc PyUnstable__mi_page_malloc
#define _mi_page_ptr_unalign PyUnstable__mi_page_ptr_unalign
#define _mi_page_queue_append PyUnstable__mi_page_queue_append
#define _mi_page_reclaim PyUnstable__mi_page_reclaim
#define _mi_page_retire PyUnstable__mi_page_retire
#define _mi_page_try_use_delayed_free PyUnstable__mi_page_try_use_delayed_free
#define _mi_page_unfull PyUnstable__mi_page_unfull
#define _mi_page_use_delayed_free PyUnstable__mi_page_use_delayed_free
#define mi_posix_memalign PyUnstable_mi_posix_memalign
#define _mi_preloading PyUnstable__mi_preloading
#define _mi_prim_alloc_huge_os_pages PyUnstable__mi_prim_alloc_huge_os_pages
#define _mi_prim_alloc PyUnstable__mi_prim_alloc
#define _mi_prim_clock_now PyUnstable__mi_prim_clock_now
#define _mi_prim_commit PyUnstable__mi_prim_commit
#define _mi_prim_decommit PyUnstable__mi_prim_decommit
#define _mi_prim_free PyUnstable__mi_prim_free
#define _mi_prim_getenv PyUnstable__mi_prim_getenv
#define _mi_prim_mem_init PyUnstable__mi_prim_mem_init
#define _mi_prim_numa_node_count PyUnstable__mi_prim_numa_node_count
#define _mi_prim_numa_node PyUnstable__mi_prim_numa_node
#define _mi_prim_out_stderr PyUnstable__mi_prim_out_stderr
#define _mi_prim_process_info PyUnstable__mi_prim_process_info
#define _mi_prim_protect PyUnstable__mi_prim_protect
#define _mi_prim_random_buf PyUnstable__mi_prim_random_buf
#define _mi_prim_reset PyUnstable__mi_prim_reset
#define _mi_prim_thread_associate_default_heap PyUnstable__mi_prim_thread_associate_default_heap
#define _mi_prim_thread_done_auto_done PyUnstable__mi_prim_thread_done_auto_done
#define _mi_prim_thread_init_auto_done PyUnstable__mi_prim_thread_init_auto_done
#define mi_process_info PyUnstable_mi_process_info
#define mi_process_init PyUnstable_mi_process_init
#define mi_pvalloc PyUnstable_mi_pvalloc
#define _mi_random_init PyUnstable__mi_random_init
#define _mi_random_init_weak PyUnstable__mi_random_init_weak
#define _mi_random_next PyUnstable__mi_random_next
#define _mi_random_reinit_if_weak PyUnstable__mi_random_reinit_if_weak
#define _mi_random_split PyUnstable__mi_random_split
#define mi_realloc_aligned_at PyUnstable_mi_realloc_aligned_at
#define mi_realloc_aligned PyUnstable_mi_realloc_aligned
#define mi_reallocarray PyUnstable_mi_reallocarray
#define mi_reallocarr PyUnstable_mi_reallocarr
#define mi_reallocf PyUnstable_mi_reallocf
#define mi_reallocn PyUnstable_mi_reallocn
#define mi_realloc PyUnstable_mi_realloc
#define mi_realpath PyUnstable_mi_realpath
#define mi_recalloc_aligned_at PyUnstable_mi_recalloc_aligned_at
#define mi_recalloc_aligned PyUnstable_mi_recalloc_aligned
#define mi_recalloc PyUnstable_mi_recalloc
#define mi_register_deferred_free PyUnstable_mi_register_deferred_free
#define mi_register_error PyUnstable_mi_register_error
#define mi_register_output PyUnstable_mi_register_output
#define mi_reserve_huge_os_pages_at_ex PyUnstable_mi_reserve_huge_os_pages_at_ex
#define mi_reserve_huge_os_pages_at PyUnstable_mi_reserve_huge_os_pages_at
#define mi_reserve_huge_os_pages_interleave PyUnstable_mi_reserve_huge_os_pages_interleave
#define mi_reserve_huge_os_pages PyUnstable_mi_reserve_huge_os_pages
#define mi_reserve_os_memory_ex PyUnstable_mi_reserve_os_memory_ex
#define mi_reserve_os_memory PyUnstable_mi_reserve_os_memory
#define mi_rezalloc_aligned_at PyUnstable_mi_rezalloc_aligned_at
#define mi_rezalloc_aligned PyUnstable_mi_rezalloc_aligned
#define mi_rezalloc PyUnstable_mi_rezalloc
#define _mi_segment_huge_page_reset PyUnstable__mi_segment_huge_page_reset
#define _mi_segment_map_allocated_at PyUnstable__mi_segment_map_allocated_at
#define _mi_segment_map_freed_at PyUnstable__mi_segment_map_freed_at
#define _mi_segment_page_abandon PyUnstable__mi_segment_page_abandon
#define _mi_segment_page_alloc PyUnstable__mi_segment_page_alloc
#define _mi_segment_page_free PyUnstable__mi_segment_page_free
#define _mi_segment_page_start PyUnstable__mi_segment_page_start
#define _mi_segment_thread_collect PyUnstable__mi_segment_thread_collect
#define _mi_stat_counter_increase PyUnstable__mi_stat_counter_increase
#define _mi_stat_decrease PyUnstable__mi_stat_decrease
#define _mi_stat_increase PyUnstable__mi_stat_increase
#define _mi_stats_done PyUnstable__mi_stats_done
#define mi_stats_merge PyUnstable_mi_stats_merge
#define mi_stats_print_out PyUnstable_mi_stats_print_out
#define mi_stats_print PyUnstable_mi_stats_print
#define mi_stats_reset PyUnstable_mi_stats_reset
#define mi_strdup PyUnstable_mi_strdup
#define _mi_strlcat PyUnstable__mi_strlcat
#define _mi_strlcpy PyUnstable__mi_strlcpy
#define _mi_strlen PyUnstable__mi_strlen
#define mi_strndup PyUnstable_mi_strndup
#define _mi_strnicmp PyUnstable__mi_strnicmp
#define _mi_strnlen PyUnstable__mi_strnlen
#define _mi_thread_data_collect PyUnstable__mi_thread_data_collect
#define _mi_thread_done PyUnstable__mi_thread_done
#define mi_thread_done PyUnstable_mi_thread_done
#define _mi_thread_id PyUnstable__mi_thread_id
#define mi_thread_init PyUnstable_mi_thread_init
#define mi_thread_stats_print_out PyUnstable_mi_thread_stats_print_out
#define _mi_toupper PyUnstable__mi_toupper
#define _mi_trace_message PyUnstable__mi_trace_message
#define mi_usable_size PyUnstable_mi_usable_size
#define mi_valloc PyUnstable_mi_valloc
#define _mi_verbose_message PyUnstable__mi_verbose_message
#define mi_version PyUnstable_mi_version
#define _mi_warning_message PyUnstable__mi_warning_message
#define mi_wcsdup PyUnstable_mi_wcsdup
#define mi_wdupenv_s PyUnstable_mi_wdupenv_s
#define mi_zalloc_aligned_at PyUnstable_mi_zalloc_aligned_at
#define mi_zalloc_aligned PyUnstable_mi_zalloc_aligned
#define mi_zalloc PyUnstable_mi_zalloc
#define mi_zalloc_small PyUnstable_mi_zalloc_small

#include "mimalloc.h"

#endif // Py_INTERNAL_MIMALLOC_H
