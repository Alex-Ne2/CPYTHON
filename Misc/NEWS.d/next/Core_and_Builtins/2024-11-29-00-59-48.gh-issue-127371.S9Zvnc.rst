The ``writelines()`` method in ``SpooledTemporaryFile`` previously only checked whether to roll over to a disk-backed file after the entire iterable was written. This led to high memory usage when handling large iterators, as the in-memory buffer grew without limit. The method was modified to write each line individually and check the buffer size after each write. If the maximum size is exceeded, the file rolls over to disk immediately, preventing excessive memory consumption.
