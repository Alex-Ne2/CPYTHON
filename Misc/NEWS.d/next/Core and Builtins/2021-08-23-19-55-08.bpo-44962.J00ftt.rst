fix a race in WeakSet