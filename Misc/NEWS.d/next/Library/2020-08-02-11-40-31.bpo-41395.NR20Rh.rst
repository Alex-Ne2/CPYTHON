Use context manager to close filetype objects automatically and avoid
ResourceWarning. Patch contributed by Amir Mohammadi.
