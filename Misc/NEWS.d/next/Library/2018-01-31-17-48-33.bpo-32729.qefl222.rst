add None type checking when socket error occurred.
