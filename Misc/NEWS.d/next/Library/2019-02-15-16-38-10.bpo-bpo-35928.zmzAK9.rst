TextIOWrapper now correctly handles the decoding buffer in read-write mode, using sockets aswell.