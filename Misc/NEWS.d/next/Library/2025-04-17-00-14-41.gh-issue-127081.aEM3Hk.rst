Fix libc thread safety issues with:
- socket: replace getservbyname, getservbyport, getprotobyname with *_r
  re-entrant versions
- pwd: lock access to getpwall
- dbm: perform stateful operations in critical sections
- os: replace getlogin with getlogin_r re-entrant version
