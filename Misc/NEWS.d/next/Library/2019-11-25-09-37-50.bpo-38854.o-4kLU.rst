Properly extract source with ``inspect.getsource`` for decorated functions.

Patch by Claudiu Popa
