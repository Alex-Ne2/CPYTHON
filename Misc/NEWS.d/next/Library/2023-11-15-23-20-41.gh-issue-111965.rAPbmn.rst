Using critical sections to make ``io.StringIO`` thread safe.
