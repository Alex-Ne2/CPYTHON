Add a new test helper (named run_until) to evaluate a condition repeatedly until it becomes true or a timeout is reached.